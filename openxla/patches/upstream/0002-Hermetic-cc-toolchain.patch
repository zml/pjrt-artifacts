From 2dd6bab0c30d52377a4b7853043ee46f5d76724b Mon Sep 17 00:00:00 2001
From: Corentin Kerisit <corentin.kerisit@gmail.com>
Date: Mon, 16 Feb 2026 14:48:28 +0000
Subject: [PATCH] Hermetic cc toolchain

---
 MODULE.bazel            |   9 ++-
 1 file changed, 9 insertions(+), 1 deletions(-)
 create mode 100644 tensorflow.base.bazelrc
diff --git a/MODULE.bazel b/MODULE.bazel
index 114f1dd36f..0227a8d821 100644
--- a/MODULE.bazel
+++ b/MODULE.bazel
@@ -6,8 +6,10 @@ module(name = "xla")
 # go/keep-sorted start
 bazel_dep(name = "abseil-cpp", version = "20250814.0", repo_name = "com_google_absl")
 bazel_dep(name = "abseil-py", version = "2.1.0", repo_name = "absl_py")
+bazel_dep(name = "apple_support", version = "1.24.4", repo_name = "build_bazel_apple_support")
 bazel_dep(name = "bazel_features", version = "1.36.0")
-bazel_dep(name = "bazel_skylib", version = "1.8.1")
+bazel_dep(name = "bazel_skylib", version = "1.9.0")
+bazel_dep(name = "bazel_lib", version = "3.2.0")
 bazel_dep(name = "boringssl", version = "0.20250818.0")
 bazel_dep(name = "curl", version = "8.11.0")
 bazel_dep(name = "google_benchmark", version = "1.8.5", repo_name = "com_google_benchmark")
@@ -30,6 +32,11 @@ bazel_dep(name = "rules_python", version = "1.6.0")
 bazel_dep(name = "rules_shell", version = "0.6.1")
 bazel_dep(name = "snappy", version = "1.2.1")
 bazel_dep(name = "zlib", version = "1.3.1.bcr.5")
+bazel_dep(name = "toolchains_llvm_bootstrapped", version = "0.5.5")
+
+register_toolchains(
+    "@toolchains_llvm_bootstrapped//toolchain:all",
+)
 # go/keep-sorted end
 
 # Only for compatibility, not directly used, change repo_name to None after upgrading Bazel to latest 7.x
-- 
2.48.1

