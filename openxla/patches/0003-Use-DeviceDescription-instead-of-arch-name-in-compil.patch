From 6c287da177825a35b28284127f685d520c322337 Mon Sep 17 00:00:00 2001
From: Hugo Mano <hugo@zml.ai>
Date: Mon, 1 Sep 2025 13:35:41 +0200
Subject: [PATCH 3/3] Use DeviceDescription instead of arch name in compilation
 pipeline

---
 xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc b/xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc
index bf122c7ea1..d2718f0d2a 100644
--- a/xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc
+++ b/xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc
@@ -109,7 +109,7 @@ static void MakeTTGIR(mlir::OpPassManager* pm,
   if (/*use_buffer_ops=*/false) {  // Not enabled by default.
     pm->addPass(mlir::createTritonAMDGPUCanonicalizePointers());
     pm->addPass(mlir::createCanonicalizerPass());
-    pm->addPass(mlir::createTritonAMDGPUConvertToBufferOps({arch_name}));
+    pm->addPass(mlir::createTritonAMDGPUConvertToBufferOps({rocm_cc.gfx_version()}));
   }
   pm->addPass(mlir::createTritonAMDFoldTrueCmpI());
   pm->addPass(mlir::createCanonicalizerPass());
-- 
2.50.1 (Apple Git-155)

