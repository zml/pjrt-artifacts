From 0bf20a5cf3d65dd53007938487c915d1ea15f9c1 Mon Sep 17 00:00:00 2001
From: Corentin Godeau <corentin@zml.ai>
Date: Fri, 12 Dec 2025 19:47:14 +0000
Subject: [PATCH] Fixed issue with passing arch_name in CreateTritonPipeline
 for ROCm.

---
 xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc b/xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc
index d2ef805ad4..666ce37933 100644
--- a/xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc
+++ b/xla/backends/gpu/codegen/triton/compilation_pipeline_rocm.cc
@@ -109,7 +109,7 @@ static void MakeTTGIR(mlir::OpPassManager* pm,
   if (/*use_buffer_ops=*/false) {  // Not enabled by default.
     pm->addPass(mlir::createTritonAMDGPUCanonicalizePointers());
     pm->addPass(mlir::createCanonicalizerPass());
-    pm->addPass(mlir::createTritonAMDGPUConvertToBufferOps({arch_name}));
+    pm->addPass(mlir::createTritonAMDGPUConvertToBufferOps({rocm_cc.gfx_version()}));
   }
   pm->addPass(mlir::createTritonAMDFoldTrueCmpI());
   pm->addPass(mlir::createCanonicalizerPass());
-- 
2.43.0
